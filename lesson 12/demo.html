<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
<!--<ul class="posts"></ul>-->

<form action="saveUserForm">
    <input type="text" name="name">
    <input type="text" name="username">
    <input type="text" name="email">
    <button></button>
</form>
<script>

// let xhr = new XMLHttpRequest();
//       //2.Конфігурація
// xhr.open('GET', 'https://jsonplaceholder.typicode.com/users', true);
//       //3. Відправляємо
// xhr.send();
// xhr.onload = function () {
//     console.log(xhr.response);
// }

// кращий спосіб
// fetch('https://jsonplaceholder.typicode.com/posts')
//     .then((response) => response.json()) // повертає json -> JS object
//     .then(postData => {
//         // console.log(postData);
//         let postBlock = document.getElementsByClassName('posts')[0];
//         for (const postItem of postData) {
//             // console.log(postItem);
//             let postItemLi = document.createElement('li');
//             postItemLi.innerText = postItem.body;
//             postBlock.appendChild(postItemLi);
//         }
//     });

//зробити Live Template в налаштуваннях
// fetch('https://jsonplaceholder.typicode.com/users')
// .then(value => value.json())
// .then(value => {
//
// });

// 1-ий спосіб він тільки дає нам інформацію (ми робимо get запит)
// fetch('https://jsonplaceholder.typicode.com/users')
// .then(value => value.json())
// .then(users => {
// console.log(users);
// });

// 2-ий спосіб - не використовують, бо 1-ий зручніший
fetch('https://jsonplaceholder.typicode.com/users'  , {method: 'Get',}) // робить запит на URL і отримую інформацію від сервера
    .then(value => value.json())
    .then(value => console.log(value));

let form = document.forms.saveUserForm;
// onsubmit відправка
form.onsubmit = (e) => {
    e.preventDefault(); //припиняємо перезавантаження сторінки
    let name = form.name.value;
    let username = form.username.value;
    let email = form.email.value;

    fetch('https://jsonplaceholder.typicode.com/posts', {
        method: 'POST',
        body: JSON.stringify({ name, username, email}),
        headers: {
            'Content-type': 'application/json; charset=UTF-8',
        },
    }) .then(value => value.json())
        .then(value => console.log(value));

}

// але якщо хочемо зберегти або відновлювати інформацію, то використувуємо цей спосіб
// fetch('https://jsonplaceholder.typicode.com/posts', { // ми відправляємо на урлу інформацію
//     method: 'POST', // цей фрагмент свідчить, що інформація відправляється
//     body: JSON.stringify({ // цей фрагмент свідчить, що відправляється
//         name: 'value1',
//         username: 'value2',
//         email: 'value3',
//     }),
//     headers: {
//         'Content-type': 'application/json; charset=UTF-8', // це все буде описано в документації що сюди додавати
//     },
// }) .then(value => value.json())
//     .then(value => console.log(value)); // тут ми отримали відповідь з сервера


</script>
</body>
</html>